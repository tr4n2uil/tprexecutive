<script id="tpl-fil-tcs" type="text/x-jquery-tmpl"> 	<div id="fil-list-${message.dirid}" class="tile-content ${key}-${message.dirid} smart-panel">		{{tmpl "#tpl-fil-lst"}}	</div></script><script id="tpl-fil-add" type="text/x-jquery-tmpl"> 	<span class="{{if FireSpark.core.helper.dataEquals(message.admin || message.padmin, 1)}}smart-block{{/if}} file-list" id="file-add-${message.dirid}">		{{tmpl({			admin : $item.data.message.admin,			name : 'Files in ' + $item.data.message.dirname,			addtxt : 'New File',			cls : 'head'		}) "#tpl-new-menu"}}				<div id="file-add-panel-${message.dirid}" class="panel">			{{if FireSpark.core.helper.dataEquals(message.admin || message.padmin, 1)}}			<form action="run.php" method="post" class="smart-form navigate hidden" id="_write:sel._file-add-${message.dirid}:chng.hide:tpl._tpl-fil-block:pnl._files-${message.dirid}:act.first:anm.none:iframe.true" enctype="multipart/form-data">				<table class="formtable"><tbody>								<tr>					<td>File</td>					<td>						<input type="file" name="file" class="required"/>						<span class="error hidden">Invalid&nbsp;File</span>					</td>				</tr>							<tr>					<td>						<input type="hidden" name="service" value="storage.file.add" />						<input type="hidden" name="filekey" value="file" />						<input type="hidden" name="dirid" value="${message.dirid}" />						<input type="hidden" name="dirname" value="${message.dirname}" />						<input type="hidden" name="navigator" value="{{if message.navigator}}${message.navigator}{{else}}${navigator}{{/if}}" />					</td>					<td>						<input name="submit" type="submit" value="Submit" class="button"/>						<input name="reset" type="reset" value="Reset" class="button"/>						<input type="button" value="Cancel" class="button smart-cancel btch-btn"/>						<span class="status"></span>					</td>				</tr>								</tbody></table>			</form>			{{/if}}		</div>	</span></script><script id="tpl-fil-block" type="text/x-jqery-tmpl">	<tr id="fil-${message.file.fileid}" class="smart-panel">		<td>			<span class="{{if FireSpark.core.helper.dataEquals(user == message.chain.user || message.padmin, true)}}smart-block{{/if}}" id="fil-edit-${message.file.fileid}">								<span class="smart-display">					<p class="title"><a href="file/${message.file.fileid}/" target="_blank">${message.file.name}</a></p>				</span>								<span class="desc">					${FireSpark.core.helper.readFileSize(Number(message.file.size))}&nbsp;&middot;&nbsp;${message.file.mime}					{{if FireSpark.core.helper.dataEquals(user == message.chain.user || message.padmin, true)}}						&nbsp;&middot;&nbsp;						<a href="#" class="smart-edit">Change</a>&nbsp;&middot;&nbsp;						<a href="permissions/${message.file.fileid}/${message.file.name}/" class="ui">Permissions</a>&nbsp;&middot;&nbsp;						<span id="fil-rm-${message.file.fileid}">							<input type="hidden" name="service" value="storage.file.remove" class="data" />							<input type="hidden" name="dirid" value="${message.dirid}" class="data" />							<input type="hidden" name="dirname" value="${message.dirname}" class="data" />							<input type="hidden" name="fileid" value="${message.file.fileid}" class="data" />							<a href="#/write/div/#fil-rm-${message.file.fileid}/~/pnl/#fil-${message.file.fileid}/act/remove/cnf/true/" class="launch">Remove</a>							<span class="status"></span>						</span>					{{/if}}				</span>							{{if FireSpark.core.helper.dataEquals(user == message.chain.user || message.padmin, true)}}				<form class="smart-form hidden navigate" id="_write:sel._fil-edit-${message.file.fileid}:chng.hide:tpl._tpl-fil-block:pnl._fil-${message.file.fileid}:act.replace:anm.none:iframe.true" method="post" action="run.php" enctype="multipart/form-data">					<div class="panel">						<table class="formtable"><tbody>						<tr>							<td>File</td>							<td>								<input type="file" name="file" class="required"/>								<span class="error hidden">Invalid&nbsp;File</span>							</td>						</tr>						<tr>							<td>								<input type="hidden" name="service" value="storage.file.write">								<input type="hidden" name="filekey" value="file">								<input type="hidden" name="fileid" value="${message.file.fileid}">								<input type="hidden" name="dirid" value="${message.dirid}">								<input type="hidden" name="dirname" value="${message.dirname}" />								<input type="hidden" name="navigator" value="{{if message.navigator}}${message.navigator}{{else}}${navigator}{{/if}}" />							</td>							<td>								<input name="submit" type="submit" value="Change" class="button smart-save fil-btn"/>								<input name="reset" type="reset" value="Cancel" class="button smart-cancel fil-btn"/>								<span class="status"></span>							</td>						</tr>						</tbody></table>					</div>				</form>				{{/if}}			</span>			<br />		</td>	</tr></script><script id="tpl-fils-block" type="text/x-jquery-tmpl"> 	{{if jQuery(message.files).length}}	{{each message.files}}		{{tmpl({ 			message : $.extend({				padmin : $item.data.message.padmin,				admin : $item.data.message.admin,				dirid : $item.data.message.dirid,				dirname : $item.data.message.dirname,				pchain : $item.data.message.pchain			}, $value), 			user: $item.data.user || '' }) "#tpl-fil-block"}}	{{/each}}	{{/if}}</script><script id="tpl-fil-lst" type="text/x-jquery-tmpl"> 	<div id="fil-add-${message.dirid}">		{{tmpl "#tpl-fil-add"}}	</div>		<div id="file-list-panel-${message.dirid}" >		<table class="file-list"><tbody id="files-${message.dirid}">			{{tmpl "#tpl-fils-block"}}		</tbody></table>	</div>		{{if jQuery(message.files).length}}		{{tmpl({ 			message: {				id : $item.data.message.dirid, 				name : $item.data.message.dirname,				total : $item.data.message.total,				pgsz : $item.data.message.pgsz,				pgno : $item.data.message.pgno,			},			service: 'files', 			panel : '#files-' + ($item.data.id || $item.data.message.dirid), 			showpages : true,			alltxt : 'All',			tpl : '#tpl-fils-block'		}) "#tpl-pgn-lst-new"}}	{{/if}}</script><script id="tpl-fil-view" type="text/x-jquery-tmpl"> 	<div id="{{if preid}}${preid}{{/if}}fil-view-${message.fileid}" class="tile-content ${key}-${message.fileid} smart-panel">		{{tmpl "#tpl-fil-info"}}	</div></script><script id="tpl-fil-info" type="text/x-jquery-tmpl"> 	{{tmpl({		admin : $item.data.message.admin,		name : ' File' + $item.data.message.file.name,		tiles : [		]	}) "#tpl-tile-menu"}}		</script><script id="tpl-fil-edt" type="text/x-jquery-tmpl"> 	<div id="{{if preid}}${preid}{{/if}}fil-edit-${id}" class="tile-content ${key}-${id}">		{{tmpl({			admin : $item.data.message.admin,			name : $item.data.menu ? $item.data.menu.name : 'Edit File : ' + $item.data.message.name,			tiles : $item.data.menu ? $item.data.menu.tiles : []		}) "#tpl-tile-menu"}}				<div id="{{if preid}}${preid}{{/if}}file-edit-panel-${id}" class="panel">			<form action="run.php" method="post" class="navigate" enctype="multipart/form-data" id="_write:sel._{{if preid}}${preid}{{/if}}file-edit-panel-${id}:iframe.true:ln._sync">				<table class="formtable"><tbody>								<tr>					<td>File</td>					<td>						<input type="file" name="file" class="required"/>						<span class="error hidden">Invalid&nbsp;File</span>					</td>				</tr>							<tr>					<td>						<input type="hidden" name="service" value="storage.file.write">						<input type="hidden" name="filekey" value="file">						<input type="hidden" name="fileid" value="${message.fileid}">						<input type="hidden" name="dirid" value="${message.dirid}">						<input type="hidden" name="navigator" value="{{if message.navigator}}${message.navigator}{{else}}${navigator}{{/if}}" />					</td>					<td>						<input name="submit" type="submit" value="Submit" class="button"/>						<input name="reset" type="reset" value="Reset" class="button"/>						<span class="status"></span>					</td>				</tr>								</tbody></table>			</form>		</div>	</div></script>