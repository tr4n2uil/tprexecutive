<script id="tpl-dir-tcs" type="text/x-jquery-tmpl"> 	<div id="dir-list-${message.stgid}" class="tile-content ${key}-${message.stgid} smart-panel data-table-panel">		{{tmpl "#tpl-dir-lst"}}	</div></script><script id="tpl-dir-add" type="text/x-jquery-tmpl"> 	<span class="{{if FireSpark.core.helper.dataEquals(message.admin || message.padmin, 1)}}smart-block{{/if}} directory-list" id="directory-add-${message.stgid}">		{{tmpl({			admin : $item.data.message.admin,			name : 'Directories in ' + $item.data.message.stgname,			addtxt : 'New Directory',			cls : 'head'		}) "#tpl-new-menu"}}				<div id="directory-add-panel-${message.stgid}" class="panel">			{{if FireSpark.core.helper.dataEquals(message.admin || message.padmin, 1)}}			<form action="run.php" method="post" class="smart-form navigate hidden" id="_write:sel._dir-add-${message.stgid}:chng.hide:tpl._tpl-dir-block:pnl._directories-${message.stgid}:act.first:anm.none" >				<table class="formtable"><tbody>								<tr>					<td>Name</td>					<td>						<input type="text" name="name" class="required cover"/>						<span class="error hidden">Invalid Name</span>					</td>				</tr>								<tr>					<td>Path</td>					<td>						<input type="text" name="path" class="required cover"/>						<span class="error hidden">Invalid Path</span>					</td>				</tr>							<tr>					<td>						<input type="hidden" name="service" value="storage.directory.add" />						<input type="hidden" name="stgid" value="${message.stgid}" />						<input type="hidden" name="stgname" value="${message.stgname}" />						<input type="hidden" name="navigator" value="{{if message.navigator}}${message.navigator}{{else}}${navigator}{{/if}}" />					</td>					<td>						<input name="submit" type="submit" value="Create" class="button"/>						<input name="reset" type="reset" value="Reset" class="button"/>						<span class="status"></span>					</td>				</tr>								</tbody></table>			</form>			{{/if}}		</div>	</span></script><script id="tpl-dir-block" type="text/x-jqery-tmpl">	<tr id="dir-${message.directory.dirid}" class="smart-panel data-table-panel">		<td><p class="title"><a href="files/${message.directory.dirid}/${message.directory.name}/" class="ui">${message.directory.name}</a></p></td>		<td>${message.chain.count}</td>		<td>			<span class="{{if FireSpark.core.helper.dataEquals(user == message.chain.user || message.padmin, true)}}smart-block{{/if}}" id="dir-edit-${message.directory.dirid}">								<span class="smart-display"></span>								<span class="desc">					<a href="files/${message.directory.dirid}/${message.directory.name}/" class="ui">Open</a>					{{if FireSpark.core.helper.dataEquals(user == message.chain.user || message.padmin, true)}}						<br /><a href="#" class="smart-edit">Edit</a>&nbsp;&middot;&nbsp;						<a href="permissions/${message.directory.dirid}/${message.directory.name}/" class="ui">Permissions</a>&nbsp;&middot;&nbsp;						<span id="dir-rm-${message.directory.dirid}">							<input type="hidden" name="service" value="storage.directory.remove" class="data" />							<input type="hidden" name="stgid" value="${message.stgid}" class="data" />							<input type="hidden" name="stgname" value="${message.stgname}" class="data" />							<input type="hidden" name="dirid" value="${message.directory.dirid}" class="data" />							<a href="#/write/div/#dir-rm-${message.directory.dirid}/~/pnl/#dir-${message.directory.dirid}/act/remove/cnf/true/" class="launch">Remove</a>							<span class="status"></span>						</span>					{{/if}}				</span>							{{if FireSpark.core.helper.dataEquals(user == message.chain.user || message.padmin, true)}}				<form class="smart-form hidden navigate" id="_write:sel._dir-edit-${message.directory.dirid}:chng.hide:tpl._tpl-dir-block:pnl._dir-${message.directory.dirid}:act.replace:anm.none" method="post" action="run.php" >					<div class="panel">						<table class="formtable"><tbody>						<tr>							<td>Name</td>							<td>								<input type="text" name="name" class="required cover" value="${message.directory.name}"/>								<span class="error hidden">Invalid Name</span>							</td>						</tr>						<tr>							<td>Path</td>							<td>								<input type="text" name="path" class="required cover" value="${message.directory.path}"/>								<span class="error hidden">Invalid Path</span>							</td>						</tr>						<tr>							<td>								<input type="hidden" name="service" value="storage.directory.edit">								<input type="hidden" name="dirid" value="${message.directory.dirid}">								<input type="hidden" name="stgid" value="${message.stgid}">								<input type="hidden" name="stgname" value="${message.stgname}" />								<input type="hidden" name="navigator" value="{{if message.navigator}}${message.navigator}{{else}}${navigator}{{/if}}" />							</td>							<td>								<input name="submit" type="submit" value="Change" class="button smart-save dir-btn"/>								<input name="reset" type="reset" value="Cancel" class="button smart-cancel dir-btn"/>								<span class="status"></span>							</td>						</tr>						</tbody></table>					</div>				</form>				{{/if}}			</span>		</td>	</tr></script><script id="tpl-dirs-block" type="text/x-jquery-tmpl"> 	{{if jQuery(message.directories).length}}	{{each message.directories}}		{{tmpl({ 			message : $.extend({				padmin : $item.data.message.padmin,				admin : $item.data.message.admin,				stgid : $item.data.message.stgid,				stgname : $item.data.message.stgname,				pchain : $item.data.message.pchain			}, $value), 			user: $item.data.user || '' }) "#tpl-dir-block"}}	{{/each}}	{{/if}}</script><script id="tpl-dir-lst" type="text/x-jquery-tmpl"> 	<div id="dir-add-${message.stgid}">		{{tmpl "#tpl-dir-add"}}	</div>		<div id="directory-list-panel-${message.stgid}" >		<table class="table-list datatable nowidth"><thead class="left">		<tr><th>Directory</th><th>Files</th><th>Links</th></tr>		</thead><tbody id="directories-${message.stgid}">			{{tmpl "#tpl-dirs-block"}}		</tbody></table>	</div>		{{if jQuery(message.directories).length}}		{{tmpl({ 			message: {				id : $item.data.message.stgid, 				name : $item.data.message.stgname,				total : $item.data.message.total,				pgsz : $item.data.message.pgsz,				pgno : $item.data.message.pgno,			},			service: 'directories', 			panel : '#directories-' + ($item.data.id || $item.data.message.stgid), 			showpages : true,			alltxt : 'All',			tpl : '#tpl-dirs-block'		}) "#tpl-pgn-lst-new"}}	{{/if}}</script><script id="tpl-dir-view" type="text/x-jquery-tmpl"> 	<div id="{{if preid}}${preid}{{/if}}dir-view-${message.dirid}" class="tile-content ${key}-${message.dirid} smart-panel">		{{tmpl "#tpl-dir-info"}}	</div></script><script id="tpl-dir-info" type="text/x-jquery-tmpl"> 	{{tmpl({		admin : $item.data.message.admin,		name : ' Directory' + $item.data.message.directory.name,		tiles : [		]	}) "#tpl-tile-menu"}}		</script><script id="tpl-dir-edt" type="text/x-jquery-tmpl"> 	<div id="{{if preid}}${preid}{{/if}}dir-edit-${id}" class="tile-content ${key}-${id}">		{{tmpl({			admin : $item.data.message.admin,			name : $item.data.menu ? $item.data.menu.name : 'Edit Directory : ' + $item.data.message.name,			tiles : $item.data.menu ? $item.data.menu.tiles : []		}) "#tpl-tile-menu"}}				<div id="{{if preid}}${preid}{{/if}}directory-edit-panel-${id}" class="panel">			<form action="run.php" method="post" class="navigate" enctype="multipart/form-data" id="_write:sel._{{if preid}}${preid}{{/if}}directory-edit-panel-${id}:iframe.true:ln._sync">				<table class="formtable"><tbody>								<tr>					<td>Directory</td>					<td>						<input type="directory" name="directory" class="required"/>						<span class="error hidden">Invalid&nbsp;Directory</span>					</td>				</tr>							<tr>					<td>						<input type="hidden" name="service" value="storage.directory.write">						<input type="hidden" name="filekey" value="directory">						<input type="hidden" name="dirid" value="${message.dirid}">						<input type="hidden" name="stgid" value="${message.stgid}">						<input type="hidden" name="navigator" value="{{if message.navigator}}${message.navigator}{{else}}${navigator}{{/if}}" />					</td>					<td>						<input name="submit" type="submit" value="Submit" class="button"/>						<input name="reset" type="reset" value="Reset" class="button"/>						<span class="status"></span>					</td>				</tr>								</tbody></table>			</form>		</div>	</div></script>